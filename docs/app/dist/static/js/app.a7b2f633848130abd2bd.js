webpackJsonp([0],{"/Bt8":function(e,t){},0:function(e,t){},B2mF:function(e,t){Array.prototype.pluck=function(e){var t=[];return this.forEach(function(r,i){t.push(r[e])}),t},Array.prototype.pluckMap=function(e){var t=this;Array.isArray(e)||(e=[e]);var r=[];return e.forEach(function(e){r[e]=[],t.forEach(function(t){r[e].push(t[e])})}),r}},E51W:function(e,t){},JfRH:function(e,t){},VrJe:function(e,t){},ZVa6:function(e,t){},kPFz:function(e,t){},lVK7:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r("E51W"),r("VrJe");var i=r("7+uW"),s={data:function(){return{open:!1,trigger:null,newServerUrl:"",newServerName:"",selectedServerNum:0,serverSet:[{name:"本地服务器",url:"http://local-api.hse.com/"},{name:"阿里云服务器",url:"http://47.94.15.53:8010/"}]}},computed:{selectedServer:{get:function(){return this.selectedServerNum},set:function(e){this.selectedServerNum=e,this.emitChange()}},selectedServerObj:{get:function(){return this.serverSet[this.selectedServer]}}},mounted:function(){this.trigger=this.$refs.button.$el,this.selectedServer=0},methods:{toggle:function(){this.open=!this.open,this.open&&this.resetInput()},resetInput:function(){this.newServerUrl="http://",this.newServerName="新建服务器"},handleClose:function(e){this.open=!1},emitChange:function(){this.$emit("serverChanged",{selectedServer:this.selectedServerObj})},submit:function(){var e=this,t=!0;if(this.serverSet.forEach(function(r){if(r.url==e.newServerUrl)return t=!1,!1}),t){var r={name:this.newServerName,url:this.newServerUrl},i=this.serverSet.push(r);this.selectedServer=i-1,this.toggle()}else app.$refs.app.hint("已经存在相同URL的服务器地址")}}},n={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("mu-paper",{staticClass:"select-server-paper",attrs:{zDepth:1}},[r("mu-select-field",{ref:"serverSelect",staticClass:"select-server",attrs:{label:"选择api服务器"},model:{value:e.selectedServer,callback:function(t){e.selectedServer=t},expression:"selectedServer"}},e._l(e.serverSet,function(e,t){return r("mu-menu-item",{key:e.url,attrs:{value:t,title:e.name}})})),e._v(" "),r("mu-float-button",{ref:"button",staticClass:"add-server-btn",attrs:{icon:"add",secondary:"",mini:""},on:{click:e.toggle}}),e._v(" "),r("mu-popover",{attrs:{trigger:e.trigger,open:e.open,anchorOrigin:{vertical:"center",horizontal:"right"},targetOrigin:{vertical:"center",horizontal:"left"},id:"add-server-pop",popoverClass:"add-server-pop"},on:{close:e.handleClose}},[r("mu-paper",{staticClass:"add-server-form"},[r("mu-text-field",{staticClass:"server-name-input",attrs:{label:"服务器名称",spellcheck:"false"},model:{value:e.newServerName,callback:function(t){e.newServerName=t},expression:"newServerName"}}),r("br"),e._v(" "),r("mu-text-field",{staticClass:"server-select-input",attrs:{label:"添加服务器",hintText:"新的API服务器地址",spellcheck:"false"},model:{value:e.newServerUrl,callback:function(t){e.newServerUrl=t},expression:"newServerUrl"}}),r("br"),e._v(" "),r("mu-float-button",{ref:"button",staticClass:"submit-new-server-btn",attrs:{icon:"done",secondary:"",mini:""},on:{click:function(t){e.submit()}}})],1)],1)],1)},staticRenderFns:[]};var a=r("VU/8")(s,n,!1,function(e){r("wip4")},null,null).exports,l={data:function(){return{hints:[]}},computed:{hasHint:function(){return!(!this.hints||!this.hints.length)}},methods:{hint:function(e,t){var r=this;t||(t=2500),this.hints.unshift({message:e,timestamp:(new Date).valueOf()}),setTimeout(function(){r.hints.splice(r.hints.indexOf(e),1)},t)}}},u={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("mu-popup",{attrs:{position:"top",overlay:!1,popupClass:"pop-up-hint-queue",open:e.hasHint}},[r("transition-group",{attrs:{name:"hint-message"}},e._l(e.hints,function(t){return r("mu-paper",{key:JSON.stringify(t),staticClass:"pop-up-hint"},[e._v(e._s(t.message))])}))],1)},staticRenderFns:[]};var o=r("VU/8")(l,u,!1,function(e){r("kPFz")},null,null).exports,c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return null!=e.apiList&&0!=e.apiList.length?r("mu-list",{staticClass:"api-menu-list"},e._l(e.apiList,function(t,i){return r("mu-list-item",{key:i,attrs:{title:i.toUpperCase(),toggleNested:""}},[r("mu-icon",{staticClass:"folder-icon",attrs:{slot:"left",value:"folder"},slot:"left"}),e._v(" "),e._l(t,function(e,t){return r("mu-list-item",{key:t,attrs:{slot:"nested",title:e.name?e.name:e.url,describeText:e.name?e.url:"",inset:""},slot:"nested"},[r("mu-icon",{attrs:{slot:"left",value:e.icon?e.icon:"toc"},slot:"left"})],1)})],2)})):e._e()},staticRenderFns:[]};var p=r("VU/8")({props:{apiList:null}},c,!1,function(e){r("JfRH")},null,null).exports,d={data:function(){return{apiList:[]}},computed:{apiListArrayed:function(){var e=[];for(var t in this.apiList)if(this.apiList.hasOwnProperty(t))for(var r in this.apiList[t])if(this.apiList[t].hasOwnProperty(r)){var i=this.apiList[t][r];e.push(i)}return e}},mounted:function(){var e=this;app.$on("onApiRefreshed",function(t){e.$set(e,"apiList",t.apiList)})}},h={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.apiListArrayed.length?r("div",{staticClass:"api-detail-list-ctn"},e._l(e.apiListArrayed,function(t){return r("div",{key:t.url,staticClass:"api-detail-list-item"},[r("div",{staticClass:"api-detail-info"},[t.icon?r("mu-icon",{staticClass:"api-detail-icon",attrs:{slot:"left",value:t.icon,size:244},slot:"left"}):e._e(),e._v(" "),r("div",{staticClass:"api-detail-url"},[e._v(e._s(t.url))]),e._v(" "),t.name?r("div",{staticClass:"api-detail-name"},[e._v(e._s(t.name))]):e._e()],1),e._v(" "),t.param&&t.param.length?r("mu-table",{class:"api-detail-param",attrs:{enableSelectAll:!0,multiSelectable:!0}},[r("mu-thead",[r("mu-tr",[r("mu-th",[e._v("名称")]),e._v(" "),r("mu-th",[e._v("输入")]),e._v(" "),r("mu-th",[e._v("备注")]),e._v(" "),r("mu-th",[e._v("是否必须")]),e._v(" "),r("mu-th",[e._v("类型")])],1)],1),e._v(" "),r("mu-tbody",e._l(t.param,function(t){return r("mu-tr",{key:t.name,attrs:{selected:t.required}},[r("mu-td",{attrs:{title:t.name}},[e._v(e._s(t.name))]),e._v(" "),r("mu-td",{staticClass:"param-val-input-td"},[r("mu-text-field",{staticClass:"param-val-input",attrs:{hintText:t.name,fullWidth:""}})],1),e._v(" "),r("mu-td",{attrs:{title:t.desc}},[e._v(e._s(t.desc))]),e._v(" "),r("mu-td",{attrs:{title:t.required?"必须":"非必需"}},[t.required?r("mu-icon",{attrs:{value:e.code,size:24}}):e._e()],1),e._v(" "),r("mu-td",{attrs:{title:t.type}},[e._v(e._s(t.type))])],1)}))],1):r("div",{staticClass:"api-detail-param no-param"},[e._v("此API无需任何参数")]),e._v(" "),r("div",{staticClass:"api-detail-send"},[r("mu-text-field",{attrs:{label:"请求发送地址",labelFloat:""}}),e._v(" "),r("mu-raised-button",{attrs:{label:"发送",secondary:""}})],1)],1)})):e._e()},staticRenderFns:[]};var v={data:function(){return{currentPageKey:0,pageKeySeq:0,pages:[]}},props:{pagesOnInit:[]},components:{ApiListPage:r("VU/8")(d,h,!1,function(e){r("ZVa6")},null,null).exports},computed:{pageHeaders:function(){return this.pages.pluck("header")}},methods:{spawnPageKey:function(){return this.pageKeySeq++,this.pageKeySeq},pushPage:function(e){var t={header:{key:this.spawnPageKey(),title:e.title},content:{type:e.type,dataDelivered:e.dataDelivered}};this.pages.push(t),e.activate&&this.activePage(t.header.key)},activePage:function(e){this.currentPageKey=e}},mounted:function(){var e=this;this.pagesOnInit&&this.pagesOnInit.forEach(function(t){e.pushPage(t)})}},f={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.pages.length?r("div",{staticClass:"tab-pages-ctn"},[r("mu-tabs",{attrs:{value:e.currentPageKey}},e._l(e.pageHeaders,function(t){return r("mu-tab",{key:t.key,attrs:{title:t.title,value:t.key},on:{click:function(r){e.activePage(t.key)}}})})),e._v(" "),e._l(e.pages,function(t){return e.currentPageKey==t.header.key?r("api-list-page",{key:t.header.key,tag:"component",attrs:{dataDelivered:t.content.dataDelivered}}):e._e()})],2):e._e()},staticRenderFns:[]};var m={components:{ServerSelector:a,HintQueue:o,ApiMenuList:p,TabPage:r("VU/8")(v,f,!1,function(e){r("/Bt8")},null,null).exports},data:function(){return{selectedServer:null,refreshTrigger:null,refreshing:!1,apiList:[]}},methods:{hint:function(e,t){return this.$refs.hintQueue.hint(e,t)},refreshApiList:function(){var e=this;this.selectedServer&&(this.refreshing=!0,Vue.http.get(this.selectedServer.url+"sys/api").then(function(t){t.body&&t.body.success&&(app.$emit("onApiRefreshed",{apiList:t.body.data}),e.apiList=t.body.data,e.hint("API列表已刷新",1400)),e.refreshing=!1},function(t){e.hint("网络请求错误",2e3),e.refreshing=!1,console.log(t)}))},changeServer:function(e){this.selectedServer=e.selectedServer,this.refreshApiList()}},mounted:function(){this.refreshTrigger=this.$refs.refreshList}},g={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-split",attrs:{id:"app"}},[r("hint-queue",{ref:"hintQueue"}),e._v(" "),r("div",{staticClass:"split-cell split-cell-left"},[r("mu-appbar",{attrs:{title:"API列表"}},[r("mu-flat-button",{attrs:{slot:"right",label:"刷新页面",onclick:"window.location.reload();"},slot:"right"})],1),e._v(" "),r("div",{ref:"refreshList",staticClass:"api-list-ctn"},[r("mu-refresh-control",{attrs:{refreshing:e.refreshing,trigger:e.refreshTrigger},on:{refresh:e.refreshApiList}}),e._v(" "),r("server-selector",{ref:"serverSelector",on:{serverChanged:e.changeServer}}),e._v(" "),r("api-menu-list",{attrs:{apiList:e.apiList}})],1)],1),e._v(" "),r("div",{staticClass:"split-cell split-cell-right"},[r("tab-page",{attrs:{pagesOnInit:[{title:"API列表",type:"api-list-page",dataDelivered:[],activate:!0}]}})],1)],1)},staticRenderFns:[]};var _=r("VU/8")(m,g,!1,function(e){r("nsHv")},null,null).exports,y=r("u64Q"),S=r.n(y),b=r("8+8L");r("B2mF");i.default.config.productionTip=!1,i.default.use(b.a),i.default.use(S.a),i.default.config.silent=!0,window.Vue=i.default,window.app=new i.default({el:"#app",components:{App:_},template:'<App ref="app"/>'})},nsHv:function(e,t){},wip4:function(e,t){}},["lVK7"]);
//# sourceMappingURL=app.a7b2f633848130abd2bd.js.map